<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DM's Chaos Engine</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet">
</head>
<body>
    <main>
        <h1>DM's Chaos Engine</h1>
        <div class="controls">
            <label for="tone">Tone:</label>
            <select id="tone">
                <option value="default">Default</option>
                <option value="silly">Extra Silly</option>
                <option value="combat">Combat-Heavy</option>
                <option value="roleplay">Roleplay Focus</option>
            </select>
            <label for="theme">Theme:</label>
            <select id="theme">
                <option value="default">Any Setting</option>
                <option value="underdark">Underdark</option>
                <option value="pirate">Pirate Seas</option>
                <option value="feywild">Feywild</option>
            </select>
            <button onclick="generateNPC()">New NPC</button>
            <button onclick="generateTwist()">Cliffhanger Twist</button>
            <button onclick="generateLoot()">Combat Loot</button>
            <button onclick="generateEncounter()">Quick Encounter</button>
            <button onclick="saveResult()">Save Result</button>
        </div>
        <div class="dice">
            <button onclick="rollDice(20)">Roll d20</button>
            <span id="dice-result"></span>
        </div>
        <div id="output" class="output-box"></div>
        <div id="history" class="history-box">
            <h2>Saved Ideas</h2>
            <ul id="history-list"></ul>
        </div>
        <div class="combat-sim">
            <h2>Combat Simulator</h2>
            <details>
                <summary>How to Use the Chaos Engine</summary>
                <div class="tutorial">
                    <p>Welcome to the DM’s Chaos Engine, crafted for Jay! Here’s how to use it:</p>
                    <ul>
                        <li><strong>Tone & Theme:</strong> Pick a tone (e.g., Silly) and theme (e.g., Feywild) to flavour your outputs.</li>
                        <li><strong>Generators:</strong> Click buttons above to create NPCs, twists, loot, or encounters—save favourites to the history below.</li>
                        <li><strong>Combat Simulator:</strong>
                            <ul>
                                <li><strong>Input Format:</strong> Enter party and enemies, one per line. Format: <code>Name: HP, AC, +Attack, Damage, [+Init]</code> (e.g., <code>Sir Chuckles: 25 HP, 15 AC, +6, 1d8+4, +2</code>). <strong>Initiative (+Init)</strong> is optional—it’s a bonus (like Dexterity) added to a d20 roll to decide who acts first (higher is better). Skip it for a random roll!</li>
                                <li><strong>Simulate:</strong> Click "Simulate Fight" for a 5-round battle. The tracker shows HP and initiative order live—watch those bars shrink!</li>
                                <li><strong>Twists:</strong> If no one wins, a cliffhanger twist pops up—perfect for your next plot twist!</li>
                                <li><strong>Download:</strong> Save the log as a text file with "Download Log."</li>
                            </ul>
                        </li>
                        <li><strong>Roll d20:</strong> Use the dice button for quick rolls anytime.</li>
                    </ul>
                    <p>Unleash the chaos, Jay—enjoy!</p>
                </div>
            </details>
            <div class="combat-inputs">
                <textarea id="party-input" placeholder="Party (e.g., Fighter: 20 HP, 16 AC, +5, 1d8+3, +2)"></textarea>
                <textarea id="enemy-input" placeholder="Enemies (e.g., Goblin: 10 HP, 12 AC, +3, 1d4+1, +1)"></textarea>
            </div>
            <button onclick="runCombatSim()">Simulate Fight</button>
            <div id="combat-tracker"></div>
            <div id="combat-log" class="output-box"></div>
            <button onclick="downloadLog()">Download Log</button>
        </div>
    </main>
    <footer>Crafted for Jay :D</footer>
    <script src="script.js"></script>
</body>
</html>